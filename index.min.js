"use strict";function vectic(a){a=a||{};var b=this;return this.targetObject=a.target,this.vecticID=a.vecticID,this.firebaseLib=void 0,this.vecticRef=void 0,this.objects={},this.templates={},this.palettes={},this.objectContainerDom=null,this.templateContainerDom=null,this.paletteContainerDom=null,"undefined"!=typeof Firebase&&(this.firebaseLib=Firebase),Object.defineProperty(this,"pathBase",{get:function(){return"http://vecticdev.firebaseio.com/"}}),Object.defineProperty(this,"pathVectic",{get:function(){return this.pathBase+"vectic/"}}),Object.defineProperty(this,"pathTemplate",{get:function(){return this.pathBase+"template/"}}),Object.defineProperty(this,"pathPalette",{get:function(){return this.pathBase+"palette/"}}),this.targetObject&&this.targetObject.html?this.vecticID?(this.rootID="v"+this.vecticID+"_id"+(_vecticUID+=1),this.init=function(){b.initHTML(),b.getDoms(),b.initFirebase()},this.initHTML=function(){return b.targetObject?void b.targetObject.html(_htmlBoiler.replace("{{ROOTID}}",b.rootID)):console.error("vectic: Target object missing")},this.getDoms=function(){b.objectContainerDom=$("svg#"+b.rootID+" g#objects").get(0),b.templateContainerDom=$("svg#"+b.rootID+" defs#templates").get(0),b.paletteContainerDom=$("svg#"+b.rootID+" defs#palettes").get(0)},this.getObjectsRef=function(){return b.vecticRef?b.vecticRef.child("objects"):console.error("vectic.getObjectsRef: Could not find vecticRef")},this.getTemplatesRef=function(){return b.vecticRef?b.vecticRef.child("templates"):console.error("vectic.getTemplatesRef: Could not find vecticRef")},this.getPalettesRef=function(){return b.vecticRef?b.vecticRef.child("palettes"):console.error("vectic.getPalettesRef: Could not find vecticRef")},this.initFirebase=function(){return b.firebaseLib?b.vecticID?(b.vecticRef=new b.firebaseLib(b.pathVectic+b.vecticID),b.vecticObjectsRef=b.getObjectsRef(),b.vecticTemplatesRef=b.getTemplatesRef(),b.vecticPalettesRef=b.getPalettesRef(),void b.setVecticHooks()):console.error("vectic: Missing vecticID"):console.error("vectic: Missing Firebase library")},this.setVecticHooks=function(){return b.vecticRef?(b.vecticObjectsRef.off("child_added",b.addObject,b.refError),b.vecticTemplatesRef.off("child_added",b.addTemplate,b.refError),b.vecticPalettesRef.off("child_added",b.addPalette,b.refError),b.vecticObjectsRef.on("child_added",b.addObject,b.refError),b.vecticTemplatesRef.on("child_added",b.addTemplate,b.refError),void b.vecticPalettesRef.on("child_added",b.addPalette,b.refError)):console.error("vectic: Could not create hooks, not connected to Database")},this.newObjectDom=function(a){return $('<use id="'+a+'"></use>')},this.addObject=function(a,c){var d=a.key(),e=a.val(),f=b.newObjectDom(d);b.objectContainerDom&&$(b.objectContainerDom).append(f),b.setObjectAttributes(f.get(0),e)},this.setObjectAttributes=function(a,b){a.setAttributeNS("xlink","xlink:href","#"+b.template),a.setAttributeNS(null,"x",b.x||null),a.setAttributeNS(null,"y",b.y||null),a.setAttributeNS(null,"width",b.width||null),a.setAttributeNS(null,"height",b.height||null)},this.addTemplate=function(a,b){a.key(),a.val()},this.addPalette=function(a,b){a.key(),a.val()},void(this.refError=function(){})):console.error("vectic(): missing vecticID"):console.error("vectic(): missing target jQuery object")}var _vecticUID=0,_htmlBoiler="";_htmlBoiler+='<span class="svgContainer">',_htmlBoiler+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" id="{{ROOTID}}">',_htmlBoiler+='<defs id="palettes"></defs>',_htmlBoiler+='<defs id="templates"></defs>',_htmlBoiler+='<g id="objects"></g>',_htmlBoiler+="</svg>",_htmlBoiler+="<style>",_htmlBoiler+=".svgContainer {",_htmlBoiler+="-webkit-touch-callout: none !important;",_htmlBoiler+="-webkit-user-select: none !important;",_htmlBoiler+="-khtml-user-select: none !important;",_htmlBoiler+="-moz-user-select: none !important;",_htmlBoiler+="-ms-user-select: none !important;",_htmlBoiler+="user-select: none !important;",_htmlBoiler+="}",_htmlBoiler+=".svgContainer svg:not([width]) {",_htmlBoiler+="width: 100% !important;",_htmlBoiler+="}",_htmlBoiler+="</style>",_htmlBoiler+="</span>";